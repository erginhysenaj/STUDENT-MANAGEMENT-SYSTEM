<div class="modal" (click)="onCancel()">
  <div class="modal-content" (click)="$event.stopPropagation()">
    <div class="modal-header">
      <h2>{{ student ? 'Edit Student' : 'Add New Student' }}</h2>
      <button class="close-btn" (click)="onCancel()">&times;</button>
    </div>

    <form [formGroup]="studentForm" (ngSubmit)="onSubmit()">
      <div class="form-group">
        <label for="emer">Name *</label>
        <input 
          type="text" 
          id="emer" 
          formControlName="emer"
          [class.error-input]="f['emer'].invalid && f['emer'].touched"
        />
        <div class="error" *ngIf="f['emer'].invalid && f['emer'].touched">
          {{ getFieldError('emer') }}
        </div>
      </div>

      <div class="form-group">
        <label for="email">Email *</label>
        <input 
          type="email" 
          id="email" 
          formControlName="email"
          [class.error-input]="f['email'].invalid && f['email'].touched"
        />
        <div class="error" *ngIf="f['email'].invalid && f['email'].touched">
          {{ getFieldError('email') }}
        </div>
      </div>

      <div class="form-group">
        <label for="notaMesatare">Average Grade *</label>
        <input 
          type="number" 
          id="notaMesatare" 
          formControlName="notaMesatare"
          min="4"
          max="10"
          step="0.1"
          [class.error-input]="f['notaMesatare'].invalid && f['notaMesatare'].touched"
        />
        <div class="error" *ngIf="f['notaMesatare'].invalid && f['notaMesatare'].touched">
          {{ getFieldError('notaMesatare') }}
        </div>
        <small style="color: #718096; font-size: 12px;">Grade must be between 4.0 and 10.0</small>
      </div>

      <div class="error" *ngIf="errorMessage" style="margin-bottom: 15px;">
        {{ errorMessage }}
      </div>

      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" (click)="onCancel()" [disabled]="isSubmitting">
          Cancel
        </button>
        <button type="submit" class="btn btn-primary" [disabled]="isSubmitting || studentForm.invalid">
          <span *ngIf="!isSubmitting">{{ student ? 'Update' : 'Create' }}</span>
          <span *ngIf="isSubmitting">Saving...</span>
        </button>
      </div>
    </form>
  </div>
</div>

