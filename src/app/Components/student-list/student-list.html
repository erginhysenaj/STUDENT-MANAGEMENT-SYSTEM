<div class="container">
  <h1>Student Management System</h1>

  <div class="search-section">
    <h2>Search Students</h2>
    <div class="search-row">
      <div class="search-field">
        <label>Name or Email:</label>
        <input 
          type="text" 
          [(ngModel)]="searchQuery" 
          placeholder="Search by name or email..."
          (keyup.enter)="searchStudents()"
        />
      </div>
      <div class="search-field">
        <label>Min Grade:</label>
        <input 
          type="number" 
          [(ngModel)]="minGrade" 
          placeholder="Min grade"
          min="4"
          max="10"
          step="0.1"
        />
      </div>
      <div class="search-field">
        <label>Max Grade:</label>
        <input 
          type="number" 
          [(ngModel)]="maxGrade" 
          placeholder="Max grade"
          min="4"
          max="10"
          step="0.1"
        />
      </div>
      <div>
        <button class="btn btn-primary" (click)="searchStudents()">Search</button>
        <button class="btn btn-secondary" (click)="clearSearch()">Clear</button>
      </div>
    </div>
  </div>

  <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
    <h2>Students List</h2>
    <button class="btn btn-success" (click)="openAddModal()">+ Add New Student</button>
  </div>

  <div *ngIf="loading" class="loading">
    Loading students...
  </div>

  <div *ngIf="!loading && filteredStudents.length === 0" class="empty-state">
    <h3>No students found</h3>
    <p>Click "Add New Student" to create your first student.</p>
  </div>

  <table *ngIf="!loading && filteredStudents.length > 0">
    <thead>
      <tr>
        <th>ID</th>
        <th>Name</th>
        <th>Email</th>
        <th>Average Grade</th>
        <th>Actions</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let student of filteredStudents">
        <td>{{ student.id }}</td>
        <td>{{ student.emer }}</td>
        <td>{{ student.email }}</td>
        <td>{{ student.notaMesatare }}</td>
        <td>
          <div class="actions">
            <button class="btn btn-primary" (click)="openEditModal(student)">Edit</button>
            <button class="btn btn-danger" (click)="deleteStudent(student.id!)">Delete</button>
          </div>
        </td>
      </tr>
    </tbody>
  </table>

  <app-student-form 
    *ngIf="showModal"
    [student]="editingStudent"
    (saved)="onStudentSaved()"
    (cancelled)="closeModal()"
  ></app-student-form>
</div>

